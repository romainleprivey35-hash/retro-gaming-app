<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Ma Collection Retro - Romain</title>
    <style>
        body { background: #121212; color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        
        .card { 
            background: #222; border-radius: 12px; padding: 10px;
            transition: all 0.4s ease; text-align: center;
            border: 1px solid #333;
        }

        /* L'effet 3D au survol */
        .card:hover { 
            transform: translateY(-10px) rotateY(10deg); 
            box-shadow: 0 10px 20px rgba(0,255,136,0.2);
            border-color: #00ff88;
        }

        /* Gestion de la transparence (si non poss√©d√©) */
        .not-owned { opacity: 0.25; filter: grayscale(100%); }

        .img-container { width: 100%; height: 250px; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; }
        img { max-width: 100%; max-height: 100%; border-radius: 8px; object-fit: contain; }
        
        .title { font-weight: bold; font-size: 0.85em; height: 35px; overflow: hidden; color: #eee; }
        .price { color: #00ff88; font-weight: bold; margin-top: 8px; font-size: 1.1em; }
    </style>
</head>
<body>
    <h1 style="text-align: center; color: #00ff88;">üéÆ MA COLLECTION RETRO</h1>
    <div id="app" class="grid">Chargement de la collection...</div>

    <script>
        const SHEET_ID = '1Vw439F_75oc7AcxkDriWi_fwX2oBbAejnp-f_Puw-FU'; // V√©rifie bien cet ID
        const SHEET_NAME = 'Jeux';

        async function fetchSheet() {
            const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${SHEET_NAME}`;
            try {
                const response = await fetch(url);
                const text = await response.text();
                const json = JSON.parse(text.substr(47).slice(0, -2));
                const rows = json.table.rows;
                
                let html = '';
                rows.forEach(row => {
                    // R√©cup√©ration des colonnes (A, B, F, H)
                    const photoUrl = row.c[0] ? row.c[0].v : ''; 
                    const titre = row.c[1] ? row.c[1].v : 'Sans titre';
                    const possede = row.c[5] ? row.c[5].v : ''; 
                    const cote = row.c[7] ? row.c[7].v : '--';

                    // On simplifie la r√®gle de possession : si c'est vide, on consid√®re que tu ne l'as pas
                    const isOwned = (possede !== null && possede !== "" && possede !== false);
                    const classOwned = isOwned ? "" : "not-owned";

                    html += `
                        <div class="card ${classOwned}">
                            <div class="img-container">
                                <img src="${photoUrl}" alt="${titre}" onerror="this.src='https://via.placeholder.com/200x250?text=Image+Introuvable'">
                            </div>
                            <div class="title">${titre}</div>
                            <div class="price">${cote} ‚Ç¨</div>
                        </div>
                    `;
                });
                document.getElementById('app').innerHTML = html;
            } catch (e) {
                document.getElementById('app').innerHTML = "Erreur d'affichage. V√©rifie ton ID de Sheet.";
            }
        }
        fetchSheet();
    </script>
</body>
</html>
