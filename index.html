<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Ma Collection Retro - Romain</title>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <style>
        body { background: #121212; color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 25px; }
        
        /* Conteneur pour l'effet 3D */
        .card-container { perspective: 1000px; }
        
        .card { 
            background: #222; border-radius: 12px; padding: 15px;
            transition: transform 0.5s; transform-style: preserve-3d;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            text-align: center;
        }

        /* Effet de transparence si pas poss√©d√© */
        .not-owned { opacity: 0.3; filter: grayscale(80%); }

        .card:hover { transform: rotateY(15deg) rotateX(10deg); } /* Petite rotation 3D au survol */
        
        img { width: 100%; height: 220px; object-fit: contain; border-radius: 8px; margin-bottom: 10px; }
        .title { font-weight: bold; font-size: 0.9em; height: 40px; overflow: hidden; }
        .price { color: #00ff88; font-family: monospace; font-size: 1.1em; margin-top: 10px; }
    </style>
</head>
<body>
    <h1 style="text-align: center; margin-bottom: 40px;">üéÆ Ma Collection Retro</h1>
    <div id="app" class="grid">Chargement de tes jeux...</div>

    <script>
        // --- CONFIGURATION ---
        const SHEET_ID = '1Vw439F_75oc7AcxkDriWi_fwX2oBbAejnp-f_Puw-FU'; 
        const SHEET_NAME = 'Jeux';
        // ---------------------

        async function fetchSheet() {
            const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${SHEET_NAME}`;
            try {
                const response = await fetch(url);
                const text = await response.text();
                const json = JSON.parse(text.substr(47).slice(0, -2));
                const rows = json.table.rows;
                
                let html = '';
                rows.forEach(row => {
                    const photo = row.c[0] ? row.c[0].v : ''; // Col A
                    const titre = row.c[1] ? row.c[1].v : 'Sans titre'; // Col B
                    const possede = row.c[5] ? row.c[5].v : ''; // Col F
                    const cote = row.c[7] ? row.c[7].v : '--'; // Col H
                    
                    // V√©rification si le jeu est poss√©d√© pour la transparence
                    const isOwned = (possede == "TRUE" || possede == "Dans ma collection");
                    const classOwned = isOwned ? "" : "not-owned";

                    html += `
                        <div class="card-container">
                            <div class="card ${classOwned}">
                                <img src="${photo}" onerror="this.src='https://via.placeholder.com/150?text=No+Image'">
                                <div class="title">${titre}</div>
                                <div class="price">${cote} ‚Ç¨</div>
                            </div>
                        </div>
                    `;
                });
                document.getElementById('app').innerHTML = html;
            } catch (e) {
                document.getElementById('app').innerHTML = "Erreur de connexion : V√©rifie le partage du Sheet.";
            }
        }
        fetchSheet();
    </script>
</body>
</html>
